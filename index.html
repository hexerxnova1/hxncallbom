<!doctype html>
<html>
<body style="background:#0b0f14;color:#fff;font-family:Arial">
<h2>ðŸ¦… Eagle Coin</h2>
<div id="bal">Balance: 0</div>
<button onclick="claim()">Claim +1500</button>
<p id="msg"></p>

<script>
const tg = window.Telegram.WebApp; tg.ready();
const user = tg.initDataUnsafe.user;

fetch("/api/me",{method:"POST",headers:{'content-type':'application/json'},body:JSON.stringify({user})})
.then(r=>r.json()).then(d=>bal.innerText="Balance: "+d.user.balance);

function claim(){
 fetch("/api/claim",{method:"POST",headers:{'content-type':'application/json'},body:JSON.stringify({user})})
 .then(r=>r.json()).then(d=>{
  msg.innerText = d.ok ? "Claimed!" : d.error;
  if(d.ok) bal.innerText="Balance: "+d.balance;
 });
}
</script>
</body>
</html>
